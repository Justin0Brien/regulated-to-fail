<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UK University London Satellite Campuses</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        #sidebar {
            width: 350px;
            background-color: #f8f9fa;
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        #sidebar-header {
            padding: 20px;
            background-color: #2c3e50;
            color: white;
        }

        #sidebar-header h1 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        #sidebar-header p {
            margin: 5px 0 0 0;
            font-size: 0.85rem;
            opacity: 0.8;
        }

        #campus-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .campus-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 6px;
            border: 1px solid #eee;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .campus-item:hover {
            border-color: #3498db;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transform: translateY(-2px);
        }

        .campus-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
            display: block;
        }

        .campus-address {
            font-size: 0.85rem;
            color: #666;
            display: flex;
            align-items: flex-start;
        }
        
        .campus-address svg {
            width: 14px;
            height: 14px;
            margin-right: 5px;
            margin-top: 2px;
            flex-shrink: 0;
            fill: #7f8c8d;
        }

        #map {
            flex: 1;
            height: 100%;
        }

        /* Custom Label Style */
        .campus-label {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 11px;
            font-weight: 700;
            color: #333;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            white-space: nowrap;
        }

        /* Leaflet Control Layer Style override for better visibility */
        .leaflet-control-layers {
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border-radius: 6px;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            #sidebar {
                width: 100%;
                height: 35%;
                order: 2;
            }
            #map {
                height: 65%;
                order: 1;
            }
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <div id="sidebar-header">
            <h1>London Satellite Campuses</h1>
            <p>UK Universities based outside London</p>
        </div>
        <div id="campus-list">
            <!-- List items will be populated by JS -->
        </div>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        // Campus Data with Origin Labels
        const campuses = [
            {
                name: "Loughborough University London",
                origin: "Loughborough",
                address: "The Broadcast Centre, Here East, Queen Elizabeth Olympic Park, London E20 3BS",
                coords: [51.5489, -0.0231],
                color: "#d35400",
                labelDirection: "top"
            },
            {
                name: "Coventry University London",
                origin: "Coventry",
                address: "University House, 109-117 Middlesex St, London E1 7JF",
                coords: [51.5173, -0.0768],
                color: "#2980b9",
                labelDirection: "top"
            },
            {
                name: "Northumbria University London",
                origin: "Northumbria",
                address: "110-114 Middlesex St, London E1 7HT",
                coords: [51.5171, -0.0772], 
                color: "#2c3e50",
                labelDirection: "bottom"
            },
            {
                name: "University of Sunderland in London",
                origin: "Sunderland",
                address: "197 Marsh Wall, London E14 9SG",
                coords: [51.5021, -0.0215],
                color: "#e67e22",
                labelDirection: "bottom"
            },
            {
                name: "Teesside University London",
                origin: "Teesside",
                address: "Here East, 14 East Bay Lane, London E15 2GW",
                coords: [51.5485, -0.0205],
                color: "#e74c3c",
                labelDirection: "right"
            },
            {
                name: "Sheffield Hallam University London",
                origin: "Sheffield",
                address: "3 Copper Square, Brent Cross Town, London NW2 1LP",
                coords: [51.5715, -0.2225], 
                color: "#8e44ad",
                labelDirection: "top"
            },
            {
                name: "Nottingham Trent (Confetti London)",
                origin: "Nottingham",
                address: "41 Commercial Road, London E1 1LA",
                coords: [51.5152, -0.0721],
                color: "#d35400",
                labelDirection: "right"
            },
            {
                name: "Ulster University London",
                origin: "Ulster",
                address: "St James' House, 10 Rosebery Avenue, London EC1R 4TF",
                coords: [51.5231, -0.1102],
                color: "#16a085",
                labelDirection: "top"
            },
            {
                name: "York St John University London",
                origin: "York",
                address: "Export Building, 1 Clove Crescent, London E14 2BA",
                coords: [51.5091, -0.0045], 
                color: "#27ae60",
                labelDirection: "right"
            },
            {
                name: "University of the West of Scotland (UWS)",
                origin: "West of Scotland",
                address: "Anchorage House, 2 Clove Crescent, London E14 2BE",
                coords: [51.5093, -0.0048], 
                color: "#c0392b",
                labelDirection: "top"
            },
            {
                name: "ARU London (Farringdon)",
                origin: "Anglia",
                address: "19 Charterhouse St, London EC1N 6RA",
                coords: [51.5192, -0.1065],
                color: "#f39c12",
                labelDirection: "left"
            },
            {
                name: "ARU London (Docklands)",
                origin: "Anglia",
                address: "Import Building, 2 Clove Crescent, London E14 2BE",
                coords: [51.5092, -0.0051], 
                color: "#f39c12",
                labelDirection: "left"
            },
            {
                name: "Staffordshire University London",
                origin: "Staffordshire",
                address: "The Broadcast Centre, Here East, Queen Elizabeth Olympic Park, London E20 3BS",
                coords: [51.5492, -0.0228], 
                color: "#c0392b",
                labelDirection: "left"
            }
        ];

        // Initialize Map
        const map = L.map('map', {
            center: [51.53, -0.1],
            zoom: 11
        });

        // Define Basemap Layers
        const voyager = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        });

        const positron = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        });

        const darkMatter = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        });

        const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        });

        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
        });

        // Add Default Layer
        voyager.addTo(map);

        // Add Layer Control
        const baseMaps = {
            "Voyager (Default)": voyager,
            "Positron (Light)": positron,
            "Dark Matter": darkMatter,
            "OpenStreetMap": osm,
            "Satellite": satellite
        };

        L.control.layers(baseMaps).addTo(map);

        const listContainer = document.getElementById('campus-list');
        const markers = [];

        // SVG Icon string
        const pinIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>`;

        campuses.forEach((campus, index) => {
            // Create Sidebar Item
            const item = document.createElement('div');
            item.className = 'campus-item';
            item.innerHTML = `
                <span class="campus-name" style="color:${campus.color}">${campus.name}</span>
                <span class="campus-address">${pinIcon} ${campus.address}</span>
            `;
            
            item.addEventListener('click', () => {
                map.flyTo(campus.coords, 16);
                markers[index].openPopup();
            });
            
            listContainer.appendChild(item);

            // Create Marker
            const marker = L.marker(campus.coords).addTo(map);
            marker.bindPopup(`<b>${campus.name}</b><br>${campus.address}`);
            
            // Add Permanent Tooltip with custom direction
            marker.bindTooltip(campus.origin, {
                permanent: true,
                direction: campus.labelDirection || 'top', // Use specific direction or default to top
                className: 'campus-label',
                offset: [0, 0] // Reset offset as direction handles positioning better
            });

            markers.push(marker);
        });

    </script>
</body>
</html>